<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cloudi — Full Cloud MVP</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
  <div id="app" class="app">
    <header class="topbar">
      <div class="brand">
        <h1>Cloudi — Full Cloud MVP</h1>
        <p class="muted">Interactive: Kernel • Smart-Packing • Elastic Scale • ML loop • FinOps • Storage • AI Serving • Monitoring • Security</p>
      </div>
      <div class="actions">
        <select id="lang" class="small-input">
          <option value="en">EN</option>
          <option value="ru">RU</option>
        </select>
        <button id="btnPreview" class="btn primary">Preview</button>
        <button id="btnStart" class="btn">Start demo</button>
      </div>
    </header>

    <main class="grid">
      <!-- Controls -->
      <section class="card">
        <h2>Main parameters</h2>
        <label>Operations (ops)</label>
        <input id="ops" type="number" value="1000000000" class="input"/>
        <div class="hrow">
          <div class="col">
            <label>Node capacity (ops/sec)</label>
            <input id="nodeCap" type="number" value="200000000" class="input"/>
          </div>
          <div class="col small">
            <label>Nodes / DC</label>
            <input id="nodesPerDC" type="number" value="4" class="input"/>
          </div>
        </div>

        <div class="hrow">
          <div class="col">
            <label>Cloudi AI optimization (%)</label>
            <input id="savePct" type="number" value="30" class="input"/>
          </div>
          <div class="col small">
            <label>Cloudi markup ×</label>
            <input id="markup" type="number" value="3" step="0.1" class="input"/>
          </div>
        </div>

        <div class="hrow">
          <button id="btnReset" class="btn ghost">Reset</button>
          <button id="btnTheme" class="btn ghost">Theme</button>
        </div>

        <p class="muted small">Baseline microtest runs in browser (non-authoritative) to demonstrate honesty of numbers.</p>
      </section>

      <!-- Summary -->
      <aside class="card card-narrow" id="summaryCard">
        <h3>Quick summary</h3>
        <div class="kv"><span>Node cap</span><span id="val_nodecap">—</span></div>
        <div class="kv"><span>Nodes (raw)</span><span id="val_nodesraw">—</span></div>
        <div class="kv"><span>Nodes (Cloudi)</span><span id="val_nodesopt">—</span></div>
        <div class="kv"><span>Data centers</span><span id="val_dcs">—</span></div>
        <div class="kv"><span>Processing time</span><span id="val_time">—</span></div>
        <div class="kv"><span>Cost / op</span><span id="val_costop">—</span></div>

        <div class="hrow">
          <button id="btnCopy" class="btn ghost">Copy</button>
          <button id="btnDownloadLog" class="btn ghost">Download log</button>
        </div>
      </aside>

      <!-- Compute & packing -->
      <section class="card wide">
        <h2>Compute Engine • Kernel & Smart-Packing</h2>
        <p class="muted">Kernel slices tasks into blocks; Dispatcher packs blocks into nodes using smart-packing (ML simulated).</p>

        <div class="hrow">
          <div class="col">
            <label>Block size (ops)</label>
            <input id="blockSize" type="number" value="1000000" class="input"/>
          </div>
          <div class="col small">
            <label>Node type</label>
            <select id="nodeType" class="input">
              <option value="vcpu">vCPU-standard</option>
              <option value="vopt">vCPU-optimized</option>
              <option value="hpc">HPC</option>
              <option value="gpu">GPU-node</option>
            </select>
          </div>
        </div>

        <div class="hrow">
          <button id="btnGenMatrix" class="btn">Generate Matrix</button>
          <button id="btnPacking" class="btn ghost">Packing details</button>
          <button id="btnML" class="btn ghost">Start ML loop</button>
        </div>

        <div id="matrixArea" class="matrix"></div>
        <h4>Packing log</h4>
        <pre id="packLog" class="log">Packing log will appear here.</pre>
      </section>

      <!-- Infra / autoscale -->
      <section class="card wide">
        <h2>Infrastructure & Elastic Scaling</h2>
        <p class="muted">Autoscale reacts to predicted load; nodes and DCs visualized.</p>
        <div id="dcArea" class="dc-grid"></div>
        <div id="infraStatus" class="muted small">—</div>
        <div class="progressOuter">
          <div id="prog" class="progressInner">0%</div>
        </div>
        <div id="eta" class="muted small">ETA: —</div>
      </section>

      <!-- Storage & AI -->
      <section class="card">
        <h3>Storage (S3-like)</h3>
        <div class="hrow">
          <input id="bucketName" class="input" placeholder="bucket-name"/>
          <button id="btnCreateBucket" class="btn">Create</button>
        </div>
        <div id="bucketsArea" class="buckets"></div>
      </section>

      <section class="card">
        <h3>AI Serving • LLM endpoints (simulated)</h3>
        <div class="hrow">
          <input id="aiPrompt" class="input" placeholder="Enter prompt..." />
          <button id="btnAI" class="btn">Infer</button>
        </div>
        <div id="aiResp" class="muted small">Responses will appear here.</div>
      </section>

      <!-- FinOps -->
      <section class="card">
        <h3>FinOps • Cost Control Engine</h3>
        <div class="kv"><span>Node cost / month</span><span id="nodeCostVal">$420</span></div>
        <div class="kv"><span>Other fixed / month</span><span id="otherCostVal">$980</span></div>
        <div class="kv"><span>Total infra / month</span><span id="infraMonthVal">—</span></div>
        <div class="kv"><span>Total infra / year</span><span id="infraYearVal">—</span></div>

        <label>Comment</label>
        <textarea id="finComment" class="input">Cost engine calculates cost/op = infra_month / (effectiveCap * nodes * seconds_per_month).</textarea>
      </section>

      <section class="card">
        <h3>Comparison • AWS / GCP / Azure / NVIDIA</h3>
        <table id="cmpTable" class="table">
          <thead><tr><th>Platform</th><th>Cost/op</th><th>Price for volume</th><th>Time (s)</th></tr></thead>
          <tbody></tbody>
        </table>
        <canvas id="cmpChart" height="120"></canvas>
      </section>

      <!-- Monitoring & Security -->
      <section class="card">
        <h3>Monitoring • Metrics</h3>
        <div class="hrow">
          <div class="col"><label>p95 target (ms)</label><input id="p95" class="input" value="250"/></div>
          <div class="col"><label>RPS</label><input id="rps" class="input" value="100000"/></div>
        </div>
        <button id="btnMetrics" class="btn">Generate metrics</button>
        <div id="metricsArea" class="muted small"></div>
      </section>

      <section class="card">
        <h3>Security • SLA / Anomaly</h3>
        <div class="kv"><span>Latency SLA</span><span id="slaVal">≤ 1s</span></div>
        <div class="kv"><span>Anomaly</span><span id="anomaly">false</span></div>
        <div class="hrow">
          <button id="btnAnom" class="btn ghost">Simulate anomaly</button>
          <button id="btnResolve" class="btn ghost">Resolve</button>
        </div>
        <h4>SLA log</h4>
        <pre id="slaLog" class="log">SLA/SEC events appear here.</pre>
      </section>

      <!-- API & ML charts -->
      <section class="card wide">
        <h3>API Gateway • Swagger-style</h3>
        <label>Request JSON</label>
        <textarea id="apiReq" class="input" rows="4">{"task":"batch","ops":1000000000,"priority":"normal"}</textarea>
        <div class="hrow">
          <button id="btnApi" class="btn">Send</button>
          <button id="btnDownloadJson" class="btn ghost">Download JSON</button>
        </div>
        <label>Response</label>
        <textarea id="apiResp" class="input" rows="2">{"status":"idle"}</textarea>

        <div style="display:flex;gap:12px;margin-top:12px">
          <canvas id="mlChart" height="120"></canvas>
          <canvas id="nodesChart" height="120"></canvas>
        </div>
      </section>

      <section class="card wide">
        <h3>Full technical log</h3>
        <pre id="fullLog" class="log">Ready — press Preview or Start demo.</pre>
      </section>
    </main>
    <footer class="footer muted">Formulas are transparent: nodes_raw = ceil(ops/nodeCap); effectiveCap = nodeCap*(1+savePct/100); nodes_opt = ceil(ops/effectiveCap); time = ops / (effectiveCap * nodes_opt).</footer>
  </div>

  <script src="app.js"></script>
</body>
</html>